# ì œë„ˆë ˆì´í„°ì™€ async/await

> ES6ì—ì„œ ë„ì…ëœ ì œë„¤ë ˆì´í„°ëŠ” ì½”ë“œ ë¸”ë¡ì˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í–ˆë‹¤ê°€ í•„ìš”í•œ ì‹œì ì— ì¬ê°œí•  ìˆ˜ ìˆëŠ” íŠ¹ìˆ˜í•œ í•¨ìˆ˜ë‹¤.
> 

### ì œë„¤ë ˆì´í„°ì™€ ì¼ë°˜ í•¨ìˆ˜ì˜ ì°¨ì´

- ì œë„¤ë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ í•¨ìˆ˜ ì‹¤í–‰ì˜ ì œì–´ê¶Œì„ ì–‘ë„í•  ìˆ˜ ìˆë‹¤.
    - ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì œì–´ê¶Œì´ í•¨ìˆ˜ì—ê²Œ ë„˜ì–´ê°€ê³  í•¨ìˆ˜ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤. â†’ í•¨ìˆ˜ í˜¸ì¶œìëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì´í›„ í•¨ìˆ˜ ì‹¤í–‰ì„ ì œì–´í•  ìˆ˜ ì—†ë‹¤.
    - ì œë„¤ë ˆì´í„°ëŠ” í•¨ìˆ˜ëŠ” í•¨ìˆ˜ ì‹¤í–‰ì„ í•¨ìˆ˜ í˜¸ì¶œìê°€ ì œì–´í•  ìˆ˜ ìˆë‹¤. â†’ í•¨ìˆ˜ í˜¸ì¶œìê°€ í•¨ìˆ˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ì‹œí‚¤ê±°ë‚˜ ì¬ê°œí•  ìˆ˜ ìˆë‹¤.
        - í•¨ìˆ˜ì˜ ì œì–´ê¶Œì„ í•¨ìˆ˜ê°€ ë…ì í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ ì–‘ë„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.
- ì œë„¤ë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤.
    - ì¼ë°˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ ê°’ì„ ë°›ì•„ í•¨ìˆ˜ ì½”ë“œë¥¼ ì¼ê´„ ì‹¤í–‰í•˜ì—¬ ê²°ê³¼ê°’ì„ í•¨ìˆ˜ ì™¸ë¶€ë¡œ ë°˜í™˜í•œë‹¤.
        - í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë™ì•ˆì—ëŠ” í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ í•¨ìˆ˜ ë‚´ë¶€ë¡œ ê°’ì„ ì „ë‹¬í•˜ì—¬ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
    - ì œë„¤ë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì™€ ì–‘ë°©í–¥ìœ¼ë¡œ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤.
        - ì œë„¤ë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ ìƒíƒœë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆê³  í˜¸ì¶œìë¡œë¶€í„° ìƒíƒœë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ë„ ìˆë‹¤.
- ì œë„¤ë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„¤ë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
    - ì¼ë°˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ì½”ë“œë¥¼ ì¼ê´„ ì‹¤í–‰í•˜ê³  ê°’ì„ ë°˜í™˜í•œë‹¤.
    - ì œë„¤ë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„¤ë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

## ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì •ì˜

> ì œë„¤ë ˆì´í„° í•¨ìˆ˜ëŠ” function* í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œë‹¤. ë˜í•œ í•˜ë‚˜ ì´ìƒì˜ yield í‘œí˜„ì‹ì„ í¬í•¨í•œë‹¤.
> 

```jsx
// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ ì„ ì–¸ë¬¸
function* genDecFunc() {
	yield 1;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í‘œí˜„ì‹
const genExpFunc = function* () {
	yield 1;
};

// ì œë„ˆë ˆì´í„° ë©”ì„œë“œ
const obj = {
	* genObjMethod() {
		yield 1;
	}
};

// ì• ìŠ¤í„°ë¦¬ìŠ¤í¬(*)ì˜ ìœ„ì¹˜ëŠ” function í‚¤ì›Œë“œì™€ í•¨ìˆ˜ ì´ë¦„ ì‚¬ì´ë¼ë©´ ì–´ë””ë“  ìƒê´€ ì—†ë‹¤ê³  í•œë‹¤.
function * genFunc_1() { yield 1; )
function *genFunc_2() { yield 2; }
function*genFunc_3() { yield 3; }
// ë³´í†µ ì¼ê´€ì„± ìœ ì§€ë¥¼ ìœ„í•´ function í‚¤ì›Œë“œ ë°”ë¡œ ë’¤ì— ë¶™ì´ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
function* genFunc_4() { yield 4; }

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•  ìˆ˜ ì—†ë‹¤.
const arrowGen = * () => {
	yield 1;
}; // error

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
const newGen = new genDecFunc(); // error 
```

## ì œë„ˆë ˆì´í„° ê°ì²´

> ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ í•¨ìˆ˜ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤. â†’ ì´ë•Œ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ë‹¤.
> 
- ì´í„°ëŸ¬ë¸” ì¥ì—ì„œ ë°°ìš´ê²ƒì²˜ëŸ¼ ì´í„°ëŸ¬ë¸”ì€ Symbol.iterator ë©”ì„œë“œë¥¼ ìƒì†ë°›ëŠ” ê°ì²´ì´ê³  ì´í„°ë ˆì´í„°ëŠ” valueì™€ done í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” next ë©”ì„œë“œë¥¼ ì†Œìœ í•˜ëŠ” ê°ì²´ë¥¼ ë§í•œë‹¤.
    - ì¦‰ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ëŠ” Symbol.iterator ë©”ì„œë“œë¥¼ ìƒì†ë°›ìœ¼ë©´ì„œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” next ë©”ì„œë“œë¥¼ ì†Œìœ í•˜ê³  ìˆëŠ” ê°ì²´ì´ë‹¤.
    
    ```jsx
    // ì œë„ˆë ˆì´í„° í•¨ìˆ˜
    function* genFunc() {
    	yield 1;
    	yield 2;
    	yield 3;
    }
    
    // ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
    const generator = genFunc();
    
    console.log(Symbol.iterator in generator); // true -> ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´
    
    console.log('next' in generator); // true
    ```
    
- ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ë ˆì´í„°ì—ëŠ” ì—†ëŠ” return, throw ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
    - return ë©”ì„œë“œëŠ” ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ê°’ì„ value í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ, trueë¥¼ done í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
    - throw ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì—ëŸ¬ë¥´ ë°œìƒì‹œí‚¤ê³  undefinedë¥¼ value í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ, trueë¥¼ done í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
    
    ```jsx
    function* genFunc() {
    	try {
    		yield 1;
    		yield 2;
    		yield 3;
    	} catch(e) {
    		console.error(e);
    	}
    }
    
    const generator = genFunc();
    
    console.log(generator.next()); // { value: 1, done: false }
    console.log(generator.return('DONE!')); // { value: 'DONE!', done: true }
    console.log(generator.throw('Error!')); // Uncaught Error! { value: undefined, done: true }
    ```
    

## ì œë„ˆë ˆì´í„°ì˜ ì¼ì‹œ ì¤‘ì§€ì™€ ì¬ê°œ

> yield í‚¤ì›Œë“œëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ì‹œí‚¤ê±°ë‚˜ yield í‚¤ì›Œë“œ ë’¤ì— ì˜¤ëŠ” í‘œí˜„ì‹ì˜ ê²°ê³¼ë¥¼ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ ë°˜í™˜í•œë‹¤.
> 

```jsx
function* genFunc() {
	yield 1;
	yield 2;
	yield 3;
}

// ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
const generator = getFunc();

// ì²˜ìŒ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
console.log(generator.next()); // { value: 1, done: false } -> next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
// ì—¬ê¸°ì„œ value í”„ë¡œí¼í‹°ì˜ ê°’ì€ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yield ëœ ê°’ì´ í• ë‹¹ëœë‹¤.

// ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
console.log(generator.next()); // { value: 2, done: false } 

console.log(generator.next()); // { value: 3, done: false }

console.log(generator.next()); // { value: undefined, done: true}
```

```jsx
// ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œì—ëŠ” ì¸ìˆ˜ë¥¼ ì „ë‹¬ í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ ì „ë‹¬í•œ ì¸ìˆ˜ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
// yield í‘œí˜„ì‹ì˜ í‰ê°€ ê²°ê³¼ê°€ í• ë‹¹ë˜ì§€ ì•ŠëŠ”ë‹¤! -> í—·ê°ˆë¦´ ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•˜ì
function* genFunc() {
	const x = yield 1; // ì²« next ë©”ì„œë“œê°€ ì‹¤í–‰ë¬ì„ë•Œ yield í‘œí˜„ì‹ì´ xì— í• ë‹¹ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤!

	const y = yield x + 10;

	// ì´ë•Œ ë°˜í™˜í•˜ëŠ” x + y ê°’ì€ ì„¸ë²ˆì§¸ next ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆì„ ë•Œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
	// ì¦‰ ì œë„ˆë ˆì´í„°ì—ì„œëŠ” ê°’ì„ ë°˜í™˜í•  í•„ìš”ê°€ ì—†ê³  return ì€ ì¢…ë£Œì˜ ì˜ë¯¸ë¡œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
	yield x + y;
}

const generator = genFunc();

let res = generator.next(); // ì²˜ìŒ í˜¸ì¶œí•˜ëŠ” next ë©”ì„œë“œì— ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ ë¬´ì‹œëœë‹¤.
console.log(res); // {value: 1, done: false}

res = generator.next(10); // ì´ë•Œ next ë©”ì„œë“œì— ì „ë‹¬í•œ 10ì´ ì œë„ˆë ˆì´í„° ê°ì²´ì˜ x ê°’ì— í• ë‹¹ëœë‹¤. ê°’ì´ í• ë‹¹ëœ x ë¥¼ ì‚¬ìš©í•´ì„œ yield í‘œí˜„ì‹ì´ í‰ê°€ëœë‹¤.
console.log(res); // {value: 20, done: false}

res = generator.next(20); // ì´ë•Œ next ë©”ì„œë“œì— ì „ë‹¬í•œ 20ì´ ì œë„ˆë ˆì´í„° ê°ì²´ì˜ y ê°’ì— í• ë‹¹ë˜ë©° ì´ë•ŒëŠ” í•¨ìˆ˜ ëê¹Œì§€ ì‹¤í–‰ëœë‹¤.
console.log(res); // {value: 30, done: true}
```

## ì œë„ˆë ˆì´í„°ì˜ í™œìš©

### ì´í„°ëŸ¬ë¸”ì˜ êµ¬í˜„

> ë¬´í•œ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ë³´ì
> 

```jsx
const infiniteFibonacci = (function* () {
	let [pre, cur] = [0, 1];

	while(true) {
		[pre, cur] = [cur, pre + cur];
		yield cur;
	}
}());
// ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜ë¡œ ê°ì‹¸ ì‹¤í–‰í•œë‹¤. -> ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
// ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” í˜¸ì¶œ ì‹œ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. -> ë‚´ë¶€ ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤!

// for of ë¬¸ì„ í†µí•´ ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œë¥¼ ë°˜ë³µí•´ì„œ í˜¸ì¶œ
for (const num of infiniteFibonacci) {
	// for of ë¬¸ì—ì„œ ë³€ìˆ˜ num ì€ next ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ë°˜í™˜í•˜ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
	// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì—ì„œ next í˜¸ì¶œ ì‹œ ë°˜í™˜í•˜ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value ê°’ì€ yield í‘œí˜„ì‹ì˜ í‰ê°€ ê²°ê³¼ì´ë‹¤.
	// next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ while ë¬¸ì´ ë°˜ë³µë˜ì–´ yield í‘œí˜„ì‹ì´ í‰ê°€ë˜ê³  ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
	if (num > 10000) break;
	console.log(num);
}
```

### ë¹„ë™ê¸° ì²˜ë¦¬

> next ë©”ì„œë“œì™€ yield í‘œí˜„ì‹ì„ í†µí•´ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
> 

```jsx
const async = generatorFunc => {
	// 2. async í•¨ìˆ˜ê°€ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìœ¼ë©´ì„œ í˜¸ì¶œë˜ë©´ ì½”ë“œê°€ ì‹¤í–‰ë˜ë©° ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
	const generator = generatorFunc();

    // 3. ì •ì˜í•œ onResolved ë©”ì„œë“œë¥¼ ë°˜í™˜í•œë‹¤.
	const onResolved = arg => {
		// 6. async í•¨ìˆ˜ê°€ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  ì´ë¥¼ ê²°ê³¼ë¡œ ë°›ëŠ”ë‹¤.
		// ì´ë•Œ ì²« ë²ˆì§¸ next í˜¸ì¶œì´ ì•„ë‹ˆë¼ë©´ arg ì¸ìˆ˜ê°€ ì¡´ì¬í•  ê²ƒì´ê³  ì´ë¥¼ next ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œë‹¤.
		const result = generator.next(arg);
		
		// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ê°ì²´ì˜ done í”„ë¡œí¼í‹°ê°€ true ì¸ ê²½ìš° result.valueë¥¼ ë°˜í™˜
		// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ê°ì²´ì˜ done í”„ë¡œí¼í‹°ê°€ false ê²½ìš° ê²°ê³¼ê°’ì„ ì¸ìˆ˜ë¡œ ìê¸° ìì‹ (onResolved)ì„ ì¬ê·€ í˜¸ì¶œ
		return result.done ? result.value : result.value.then(res => onResolved(res));
	};

	// 4. ì •ì˜í•œ onResolved ë©”ì„œë“œë¥¼ ë°˜í™˜í•œë‹¤.
	return onResolved;
};

// 1. async í•¨ìˆ˜ì— ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ì„œ í˜¸ì¶œí•œë‹¤.
// 5. async í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” onResolved ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.
async(function* fetchTodo() {
	const url = 'https://jsonplaceholder.typicode.com/todos/1';

    // ì²« ë²ˆì§¸ next í˜¸ì¶œ ì‹œ fetch ë¬¸ê¹Œì§€ ì‹¤í–‰í•œ ë’¤ í•´ë‹¹ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
	const response = yield fetch(url);

    // ë‘ ë²ˆì§¸ next í˜¸ì¶œ ì‹œ responseë¥¼ ì—­ì§ë ¬í™” í•œ ê°’ì„ ë°˜í™˜í•œë‹¤.
    // ì´ë•Œ response ëŠ” ë‘ ë²ˆì§¸ next í˜¸ì¶œ ì‹œ ì „ë‹¬ë°›ì€ ì¸ìˆ˜ê°€ ë˜ëŠ”ë° ì´ëŠ” fetch ì˜ ê²°ê³¼ì´ë‹¤.
    // fetchì˜ ê²°ê³¼ëŠ” Response ê°ì²´ë¥¼ ë˜í•‘í•œ Promise ê°ì²´ì´ë‹¤.
	const todo = yield response.json();

    // ì„¸ ë²ˆì§¸ next í˜¸ì¶œ ì‹œ todo ë³€ìˆ˜ì— next ë©”ì„œë“œì˜ ì¸ìˆ˜ê°€ í• ë‹¹ëœë‹¤. -> ì—­ì§ë ¬í™”í•œ fetchì˜ ê²°ê³¼
    // ë§ˆì§€ë§‰ í˜¸ì¶œ(ë”ì´ìƒ yieldê°€ ì—†ë‹¤.)ì´ë¯€ë¡œ next ë©”ì„œë“œëŠ” value: undefined, done: false ê°€ ë°˜í™˜ëœë‹¤.
    // ë‚¨ì€ ì½”ë“œë„ ëª¨ë‘ ì‹¤í–‰ëœë‹¤.
	console.log(todo);
	// {userId: 1, id: 1, title: 'delectus aut autem', complete: false}
})();

// async í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°”ë¡œ í˜¸ì¶œí•˜ë„ë¡ í•˜ì§€ ì•Šê³  ë”°ë¡œ ëº„ ìˆ˜ë„ ìˆë‹¤.
const excute = async(function* fetchTodo() {
	const url = 'https://jsonplaceholder.typicode.com/todos/1';

	const response = yield fetch(url);
	const todo = yield response.json();
	console.log(todo);
	// {userId: 1, id: 1, title: 'delectus aut autem', complete: false}
});

excute();
// ìœ„ ì²˜ëŸ¼ ì‹¤í–‰í•´ë„ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
```

<aside>
ğŸ’¡ ì œë„ˆë ˆì´í„° ì‹¤í–‰ê¸°ê°€ í•„ìš”í•˜ë‹¤ë©´ ì§ì ‘ êµ¬í˜„í•˜ì§€ ë§ê³  co ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ë³´ì.

</aside>

## async/await

> ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•´ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í–ˆìœ¼ë‚˜ ì½”ë“œê°€ ê¸¸ì–´ì§€ê³  ê°€ë…ì„±ë„ ì¢‹ë‹¤ê³  ë³´ê¸°ëŠ” í˜ë“¤ë‹¤.
> 

<aside>
ğŸ’¡ ES8ì—ì„œëŠ” ì œë„ˆë ˆì´í„°ë³´ë‹¤ ê°„ë‹¨í•˜ê³  ê°€ë…ì„± ì¢‹ê²Œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸°ì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” async/awaitê°€ ë„ì…ë˜ì—ˆë‹¤.

</aside>

- async/await ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.

```jsx
async function fetchTodo() {
	const url = 'https://jsonplaceholder.typicode.com/todos/1';

	const response = await fetch(url);
	const todo = await response.json();
	console.log(todo);
}

fetchTodo();
```

<aside>
ğŸ’¡ async/awaitì€ í”„ë¡œë¯¸ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤. í”„ë¡œë¯¸ìŠ¤ë¥¼ ì •í™•í•˜ê²Œ ì´í•´í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•  ë“¯.

</aside>

### async í•¨ìˆ˜

> async í•¨ìˆ˜ëŠ” async í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì •ì˜í•˜ë©° ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤. (ëª…ì‹œì ìœ¼ë¡œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šë”ë¼ë„ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ê°’ì„ resolveí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
> 

```jsx
// async í•¨ìˆ˜ ì„ ì–¸
async function asyncFunc(n) { return n; }
asyncFunc(1).then(v => console.log(v)); // 1

// async í•¨ìˆ˜ í‘œí˜„ì‹
const asyncExpFunc = async function(n) { return n; };
asyncExpFunc(2).then(v => console.log(v)); // 2

// async í™”ì‚´í‘œ í•¨ìˆ˜
const asyncArrowFunc = async n => n;
asyncArrowFunc(3).then(v => console.log(v)); // 3

// async ë©”ì„œë“œ
const obj = {
	async asyncMethod(n) { return n; }
};
obj.asyncMethod(4).then(v => console.log(v)); // 4

// async í´ë˜ìŠ¤ ë©”ì„œë“œ
class MyClass {
	async asyncClassMethod(n) { return n }
}
const myClass = new MyClass();
myClass.asyncClassMethod(5).then(v => console.log(v)); // 5
```

### await í‚¤ì›Œë“œ

> await í‚¤ì›Œë“œëŠ” ë°˜ë“œì‹œ async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. await í‚¤ì›Œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœê°€ ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ë‹¤ê°€ settled ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
> 

```jsx
const getGithubUserName = async id => { // async í•¨ìˆ˜ ì •ì˜
	const res = await fetch(`https://api.github.com/users/${id}`); // await í‚¤ì›Œë“œ ì‚¬ìš©
	const { name } = await res.json(); // res ê°ì²´ì—ì„œ name ê°’ë§Œ ê°€ì ¸ì˜¨ë‹¤.
	console.log(name); // Lee Ha Neul
};

getGithubUserName('msrim2007');
```

- fetch í•¨ìˆ˜ê°€ ìˆ˜í–‰í•œ HTTP ìš”ì²­ì— ëŒ€í•œ ì„œë²„ì˜ ì‘ë‹µì´ ë„ì°©í•´ fetch í•¨ìˆ˜ê°€ ë°˜í™˜í•œ í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœê°€ ë ë•Œê¹Œì§€ ëŒ€ê¸°
    - í•´ë‹¹ í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ì²˜ë¦¬ ê²°ê³¼ê°€ res ë³€ìˆ˜ì— ë‹´ê¸´ë‹¤

### ì—ëŸ¬ ì²˜ë¦¬

> async/await ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬ëŠ” try..catch ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
> 

```jsx
const foo = async () => {
	try {
		const wrongUrl = 'https://wrong.url';

		const response = await fetch(wrongUrl);
		const data = await response.json();
		console.log(data);
	} catch (err) {
		console.error(err);
	}
};

foo();
```

- async í•¨ìˆ˜ ë‚´ì—ì„œ catch ë¬¸ì„ ì‚¬ìš©í•´ì„œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ async í•¨ìˆ˜ëŠ” ë°œìƒí•œ ì—ëŸ¬ë¥¼ reject í•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
    - í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì†ì²˜ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ì—ëŸ¬ë¥¼ ìºì¹˜í•  ìˆ˜ë„ ìˆë‹¤.

```jsx
foo().then(console.log).catch(console.error);
```