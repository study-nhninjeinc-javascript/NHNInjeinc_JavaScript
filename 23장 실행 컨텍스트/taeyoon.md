# 23_실행 컨텍스트

4가지의 소스 타입

1. 전역코드 : **전역에 존재하는 소스코드**를 말한다. 전역에 정의된 함수, 클래스 등의 내부 코드는 x
2. 함수코드 : 함수 내부에 존재하는 소스코드, 내부에 중첩된 함수, 클래스는 x 
3. eval 코드 : 빌트인 전역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드
4. 모듈코드 : 모듈 내부에 존재하는 소스코드를 말한다 모듈 내부의 함수 클래스등 내부 코드는 x

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1ad4a090-7222-4edf-9ca4-3a8c23d815fb/Untitled.png)

⚠️자바스크립트는 소스 코드를 **소스코드의 평가**와 **소스코드의 실행** 과정으루 나누어 처리

```jsx
var a;
a=1;

//소스코드 평가 과정
//step 1 var a를 먼저 실행
//step 2 생성된 변수 식별자 a는 실행컨텍스트가 관리하는 스코프에 등록 후 undefined로 초기화

//소스코드 실행 과정
//step 3 x=1;만 실행
```

### 실행 컨텍스트의 역할

****전역 코드 평가**

소스코드 평가 과정에서는 선언문 먼저 실행 

⇒전역 변수와 전역함수가 실행컨텍스트가 관리하는 전역 스코프에 등록

⇒var키워드로 선언 된 전역변수, 함수 선언문은 **전역 객체의 프로퍼티와 메서드**가 됨

****전역 코드 실행**

전역 코드 평가 과정이 끝나면 **런타임이 시작**되어 전역 코드가 순차적 실행

⇒전역 변수에 값이 할당, 함수 호출 

****함수 코드 평가**

매개변수, 지역 변수 선언문이 먼저 실행되고 → 생성된 매개변수, 지역변수가 실행 컨텍스트가 관리하는 지역 스코프에 등록 → arguments 객체 생성 되어 지역 스코프 등록, **this바인딩 결정**

****함수 코드 실행**

코드가 실행되기에 스코프, 식별자, 코드 실행순서 등 관리 필요

**=== 실행컨텍스트는 식별자를 등록하고 관리하는 스코프와 코드 실행 순서 관리를 구현한 내부 매커니즘**

식별자와 스코프는 실행 컨텍스트의 렉시컬 환경으로 관리

실행순서는 실행 컨텍스트 스택으로 관리

---

### 실행 컨텍스트 스택

```jsx
const a = 1;

function f1(){
	const b = 2;

	function f2(){
		const c = 3;
		console.log(a + b + c);
	}
	f2();
}
f1(); //6
```

⇒ 함수 호출 → 코드평가 → 실행컨텍스트 생성 → **스택자료구조로 관리**

전역실행컨텍(push) -  f1실컨(push) - f2실컨 (push & pop) - f1실컨(pop) -전역실컨(pop)- empty 

### 렉시컬 환경

식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 참조를 기록하는 자료구조로 **실행 컨텍스트를 구성하는 컴포넌트**

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/889d9fe7-c5ed-4d0d-9454-a5b4635c18dd/Untitled.png)

렉시컬 환경은 **키와 값을 갖는 객체 형태**의 스코프를 생성하여 식별자=키 바인딩된 값을 관리