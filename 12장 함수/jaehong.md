## 12장 함수

### 함수 정의

-   함수를 정의하는 방법에는 4가지가 있다.

1. 함수 선언문
2. 함수 표현식
3. Function 생성자 함수
4. 화살표 함수

함수 선언식

```
// 함수 선언식
function hello() {
    return 'hello';
}

hello();
```

-   함수 선언식은 함수 리터럴과 형태가 동일하나, 함수 선언문은 함수 이름을 생략할 수 없다는 점에서 차이가 있다.

```
function foo() {
    console.log('foo');
}
foo();

function bar() {
    console.log('bar');
}
bar();
```

-   함수 리터럴에서 함수 이름은 함수 몸체 내에서만 참조할 수 있는 식별자다.
    함수 몸체 외부에서는 함수 이름으로 함수를 참조할 수 없으므로 함수 이름으로는 함수를 호출할 수 없다는 뜻이다.
    그러므로 bar() 호출시에 에러가 나게 된다.

-   foo()가 가능한 이유는 자바스크립트 엔진이 생성된 함수를 호출하기 위해 함수 이름과 동일한 이름의 식별자를 암묵적으로 생성하고, 거기에 함수 객체를 할당하기 때문에 가능하게 된다.

함수 표현식

```
//함수 표현식
var add = function(x, y) {
    return x + y;
};

console.log(add(2,5));
```

-   자바스크립트의 함수는 객체 타입의 값이다. 함수는 값의 성질을 갖는 일급 객체이다.
    일급 객체라는 것은 함수를 값처럼 자유롭게 사용할 수 있다는 의미이다.
    함수 리터럴로 생성한 함수 객체를 변수에 할당할 수 있다. 이러한 함수 정의 방식을 함수 표현식이라고 한다.

> 함수 선언식 vs 함수 표현식

```
console.log(add(2,5));  //7
console.log(sub(2,5));  //type error

function add(x,y) {
    return x + y;
}

var sub = function(x,y) {
    return x - y;
}
```

-   함수 선언문으로 정의한 함수와 함수 표현식으로 정의한 함수의 생성 시점이 다르다.
-   함수 선언문으로 함수를 정의하면 런타임 이전에 함수 객체가 먼저 생성된다. 이처럼 함수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징을 함수 호이스팅이라고 한다.
-   함수 호이스팅은 함수를 호출하기 전에 반드시 함수를 선언해야 한다는 당연한 규칙을 무시한다.
    이 문제 때문에 함수 선언문 대신 함수 표현식을 사용할 것을 권장하고 있다.

### 함수 호출

```
function add(x,y) {
    return x + y;
}
console.log(add(2)); //NaN
console.log(add('a','b')); //'ab'
```

위 코드는 자바스크립트 문법상 어떠한 문제도 없으므로 자바스크립트 엔진은 위 코드를 실행 할 것이다.
이러한 문제가 발생한 원인은 다음과 같다.

1. 자바스크립트 함수는 매개변수와 인수의 개수가 일치하는지 확인하지 않는다.
2. 자바스크립트는 동적 타입 언어이다. 자바스크립트 함수는 매개변수의 타입을 사전에 지정 할 수 없다.

따라서 함수를 정의할 때 적절한 인수가 잘 전달되었는지 확인할 필요가 있다.

### 참조에 의한 전달과 외부 상태의 변경

-   원시 값은 값에 의한 전달, 객체는 참조에 의한 전달 방식으로 동작한다. 매개변수도 함수 몸체 내부에서 변수와 동일하게 취급되므로 또한 타입에 따라 전달 방식을 따른다.

```
function changeVal(primitive, obj) {
    primitive += 100;
    obj.name = 'Kim';
}

var num = 100;
var person = {name : 'Lee'};

changeVal(num, person);

console.log(num); //원시 값은 원본이 훼손되지 않는다.
console.log(person); //{name: 'Kim'}
```

-   원시 타입 인수는 값 자체가 복사되어 매개변수에 전달되기 때문에 원본이 훼손되지 않는다.
-   객체 타입 인수는 참조값이 복사되어 참조값을 통해 객체를 변경할 경우 원본이 훼손된다.

### 다양한 함수의 형태

재귀함수

-   재귀함수 내에는 재귀 호출을 멈출 수 있는 탈출 조건을 반드시 만들어야한다.
    중첩함수

```
function outer() {
    var x = 1;
    function inner() {
        var y = 2;
        //외부 함수의 변수를 참조할 수 있다.
        console.log(x + y); //3
    }
    inner();
}
outer();
```

-   호이스팅으로 인해 혼란이 발생할 수 있으므로 코드 블록에서 함수 선언문을 통해 함수를 정의하는 것은 바람직하지 않다.

콜백함수

순수 함수

비순수 함수
